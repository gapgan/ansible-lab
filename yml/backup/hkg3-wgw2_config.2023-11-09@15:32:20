set version 21.4R3.15
set system host-name hkg3-wgw2
set system root-authentication encrypted-password "$6$qsj9Hz92$Ao15.pMccpotmusvPIyjqqUGmpXPSpv9vew98SZ062u6h58AFiflaNiL8W1Un/bZ7M5Nnu0oFEBmYTw0rsoAD/"
set system login retry-options tries-before-disconnect 3
set system login retry-options backoff-threshold 2
set system login retry-options backoff-factor 5
set system login retry-options minimum-time 20
set system login retry-options maximum-time 60
set system login retry-options lockout-period 1
set system login class read-only-local idle-timeout 10
set system login class read-only-local permissions view-configuration
set system login class read-only-local allow-commands "(ping)|(traceroute)|(show)"
set system login class super-user-local idle-timeout 10
set system login class super-user-local permissions all
set system login user admin uid 2004
set system login user admin class super-user-local
set system login user admin authentication encrypted-password "$6$7bq2Omtg$NkjAp5sguLRzy1S0XiDWwLEYaLqsB1bRZvRSxEq7u40UOR7jw5OvnfH5u7PJ4J72C1MH1Zs3Hga3DYhmjeH0y."
set system login user readonly uid 2010
set system login user readonly class read-only-local
set system login user remote uid 2007
set system login user remote class super-user-local
set system login message "Warning Notice:This system is restricted to Synaptics Authorized users for authorized business purposes only. Unauthorized access is a violation of the law. By proceeding, you consent to this monitoring. Access to confidential data available through this system must be explicitly permitted, and made available only to people with a need to know."
set system services ssh protocol-version v2
set system services ssh connection-limit 5
set system services ssh rate-limit 5
set system services netconf ssh
set system time-zone Asia/Hong_Kong
set system authentication-order password
set system authentication-order tacplus
set system tacplus-server 10.110.10.201 secret "$9$P5TFCtOESe0OMXxNVbP5Tz9p1RSlvLleaZUDkquOB"
set system tacplus-server 10.110.10.201 source-address 10.242.0.2
set system tacplus-server 10.112.14.201 secret "$9$P5TFCtOESe0OMXxNVbP5Tz9p1RSlvLleaZUDkquOB"
set system tacplus-server 10.112.14.201 source-address 10.242.0.2
set system tacplus-server 10.20.14.201 secret "$9$P5TFCtOESe0OMXxNVbP5Tz9p1RSlvLleaZUDkquOB"
set system tacplus-server 10.20.14.201 source-address 10.242.0.2
set system accounting events login
set system accounting events interactive-commands
set system accounting destination tacplus
set system syslog archive size 100k
set system syslog archive files 3
set system syslog user * any emergency
set system syslog file interactive-commands interactive-commands any
set system syslog file messages any notice
set system syslog file messages authorization info
set system max-configurations-on-flash 5
set system max-configuration-rollbacks 5
set system license autoupdate url https://ae1.juniper.net/junos/key_retrieval
set system phone-home server https://redirect.juniper.net
set system phone-home rfc-compliant
set services flow-monitoring version9 template SCRUTINIZER ipv4-template
set security ike proposal ike-phase1 authentication-method pre-shared-keys
set security ike proposal ike-phase1 dh-group group2
set security ike proposal ike-phase1 authentication-algorithm sha1
set security ike proposal ike-phase1 encryption-algorithm aes-128-cbc
set security ike policy ike-hkg2-policy mode main
set security ike policy ike-hkg2-policy proposals ike-phase1
set security ike policy ike-hkg2-policy pre-shared-key ascii-text "$9$SEne87goGqmTX7UHk.F30BIcSeWLNdwYMWZU"
set security ike policy ike-ty4-policy mode main
set security ike policy ike-ty4-policy proposals ike-phase1
set security ike policy ike-ty4-policy pre-shared-key ascii-text "$9$SEne87goGqmTX7UHk.F30BIcSeWLNdwYMWZU"
set security ike gateway hkg2-wgw2 ike-policy ike-hkg2-policy
set security ike gateway hkg2-wgw2 address 199.33.119.21
set security ike gateway hkg2-wgw2 external-interface ge-0/0/0.0
set security ike gateway ty4-wgw2 ike-policy ike-ty4-policy
set security ike gateway ty4-wgw2 address 205.175.208.9
set security ike gateway ty4-wgw2 external-interface ge-0/0/0.0
set security ipsec policy ipsec-standard-policy perfect-forward-secrecy keys group2
set security ipsec policy ipsec-standard-policy proposal-set standard
set security ipsec vpn hkg2-vpn bind-interface st0.1
set security ipsec vpn hkg2-vpn vpn-monitor
set security ipsec vpn hkg2-vpn ike gateway hkg2-wgw2
set security ipsec vpn hkg2-vpn ike no-anti-replay
set security ipsec vpn hkg2-vpn ike ipsec-policy ipsec-standard-policy
set security ipsec vpn hkg2-vpn establish-tunnels immediately
set security ipsec vpn ty4-vpn bind-interface st0.2
set security ipsec vpn ty4-vpn vpn-monitor
set security ipsec vpn ty4-vpn ike gateway ty4-wgw2
set security ipsec vpn ty4-vpn ike no-anti-replay
set security ipsec vpn ty4-vpn ike ipsec-policy ipsec-standard-policy
set security ipsec vpn ty4-vpn establish-tunnels immediately
set security alg dns disable
set security alg ftp disable
set security alg h323 disable
set security alg mgcp disable
set security alg msrpc disable
set security alg sunrpc disable
set security alg rsh disable
set security alg rtsp disable
set security alg sccp disable
set security alg sip disable
set security alg sql disable
set security alg talk disable
set security alg tftp disable
set security alg pptp disable
set security screen ids-option untrust-screen icmp ping-death
set security screen ids-option untrust-screen ip source-route-option
set security screen ids-option untrust-screen ip tear-drop
set security screen ids-option untrust-screen tcp syn-flood alarm-threshold 1024
set security screen ids-option untrust-screen tcp syn-flood attack-threshold 200
set security screen ids-option untrust-screen tcp syn-flood source-threshold 1024
set security screen ids-option untrust-screen tcp syn-flood destination-threshold 2048
set security screen ids-option untrust-screen tcp syn-flood timeout 20
set security screen ids-option untrust-screen tcp land
set security nat source rule-set trust-to-untrust from zone trust
set security nat source rule-set trust-to-untrust to zone untrust
set security nat source rule-set trust-to-untrust rule source-nat-rule match source-address 0.0.0.0/0
set security nat source rule-set trust-to-untrust rule source-nat-rule then source-nat interface
deactivate security nat source rule-set trust-to-untrust
set security policies from-zone trust to-zone trust policy trust-to-trust match source-address any
set security policies from-zone trust to-zone trust policy trust-to-trust match destination-address any
set security policies from-zone trust to-zone trust policy trust-to-trust match application any
set security policies from-zone trust to-zone trust policy trust-to-trust then permit
set security policies from-zone trust to-zone untrust policy trust-to-untrust match source-address any
set security policies from-zone trust to-zone untrust policy trust-to-untrust match destination-address any
set security policies from-zone trust to-zone untrust policy trust-to-untrust match application any
set security policies from-zone trust to-zone untrust policy trust-to-untrust then permit
set security policies from-zone untrust to-zone trust policy untrust-to-trust match source-address any
set security policies from-zone untrust to-zone trust policy untrust-to-trust match destination-address any
set security policies from-zone untrust to-zone trust policy untrust-to-trust match application any
set security policies from-zone untrust to-zone trust policy untrust-to-trust then deny
set security policies pre-id-default-policy then log session-close
set security zones security-zone trust host-inbound-traffic system-services all
set security zones security-zone trust host-inbound-traffic protocols all
set security zones security-zone trust interfaces irb.0
set security zones security-zone trust interfaces ge-0/0/1.0
set security zones security-zone trust interfaces lo0.0
set security zones security-zone trust interfaces st0.1
set security zones security-zone trust interfaces st0.2
set security zones security-zone untrust screen untrust-screen
set security zones security-zone untrust host-inbound-traffic system-services ping
set security zones security-zone untrust host-inbound-traffic system-services ike
set security zones security-zone untrust interfaces ge-0/0/0.0
set security zones security-zone untrust interfaces ge-0/0/7.0
set security zones security-zone untrust interfaces dl0.0 host-inbound-traffic system-services tftp
set interfaces ge-0/0/0 unit 0 description "HKBN_DIA_100M CID#39334"
set interfaces ge-0/0/0 unit 0 bandwidth 100m
set interfaces ge-0/0/0 unit 0 family inet address 183.178.35.109/28
set interfaces ge-0/0/1 unit 0 description "10.242.188.0/24 to core"
set interfaces ge-0/0/1 unit 0 family inet sampling input
set interfaces ge-0/0/1 unit 0 family inet sampling output
set interfaces ge-0/0/1 unit 0 family inet address 10.242.188.2/24
set interfaces ge-0/0/2 unit 0
set interfaces ge-0/0/3 unit 0
set interfaces ge-0/0/4 unit 0
set interfaces ge-0/0/5 unit 0
set interfaces ge-0/0/6 unit 0
set interfaces ge-0/0/7 unit 0
set interfaces cl-1/0/0 dialer-options pool 1 priority 100
set interfaces dl0 unit 0 family inet negotiate-address
set interfaces dl0 unit 0 family inet6 negotiate-address
set interfaces dl0 unit 0 dialer-options pool 1
set interfaces dl0 unit 0 dialer-options dial-string 1234
set interfaces dl0 unit 0 dialer-options always-on
set interfaces irb unit 0 family inet address 192.168.1.1/24
set interfaces lo0 unit 0 family inet filter input router-protect
set interfaces lo0 unit 0 family inet address 10.242.0.2/32
set interfaces st0 unit 1 description "IPSEC VPN to hkg2"
set interfaces st0 unit 1 family inet address 10.242.250.2/30
set interfaces st0 unit 2 description "IPSEC VPN to TY4"
set interfaces st0 unit 2 family inet address 10.242.250.6/30
set snmp location "HKG3 Office"
set snmp contact "it-network@synaptics.com"
set snmp client-list snmp-list 10.20.60.60/32
set snmp client-list snmp-list 10.20.60.135/32
set snmp client-list snmp-list 10.20.60.193/32
set snmp client-list snmp-list 10.20.14.210/32
set snmp client-list snmp-list 10.20.28.15/32
set snmp client-list snmp-list 10.46.60.13/32
set snmp client-list snmp-list 10.70.60.230/32
set snmp client-list snmp-list 10.110.60.31/32
set snmp client-list snmp-list 10.112.60.13/32
set snmp client-list snmp-list 10.114.60.13/32
set snmp client-list snmp-list 10.250.148.16/32
set snmp client-list snmp-list 172.20.100.60/32
set snmp community "dida^uwh5r5" authorization read-only
set snmp community "dida^uwh5r5" client-list-name snmp-list
set forwarding-options sampling instance sampling-1 input rate 10
set forwarding-options sampling instance sampling-1 input run-length 0
set forwarding-options sampling instance sampling-1 family inet output flow-server 10.20.5.60 port 2055
set forwarding-options sampling instance sampling-1 family inet output flow-server 10.20.5.60 version9 template SCRUTINIZER
set forwarding-options sampling instance sampling-1 family inet output inline-jflow source-address 10.242.0.2
set policy-options prefix-list HKG3 10.242.0.0/16
set policy-options prefix-list remote-vpn 199.33.119.21/32
set policy-options prefix-list remote-vpn 205.175.208.9/32
set policy-options prefix-list manager-ip 10.0.0.0/8
set policy-options prefix-list manager-ip 14.140.184.128/27
set policy-options prefix-list manager-ip 14.140.184.132/32
set policy-options prefix-list manager-ip 35.220.249.98/32
set policy-options prefix-list manager-ip 60.250.40.144/28
set policy-options prefix-list manager-ip 65.19.188.0/24
set policy-options prefix-list manager-ip 124.74.246.121/32
set policy-options prefix-list manager-ip 169.254.0.17/32
set policy-options prefix-list manager-ip 172.0.0.0/8
set policy-options prefix-list manager-ip 182.71.185.253/32
set policy-options prefix-list manager-ip 192.147.44.0/24
set policy-options prefix-list manager-ip 192.147.44.247/32
set policy-options prefix-list manager-ip 222.209.225.70/32
set policy-options policy-statement from-hkg2vpn term 1 from prefix-list HKG3
set policy-options policy-statement from-hkg2vpn term 1 then reject
set policy-options policy-statement from-hkg2vpn term 2 then local-preference 90
set policy-options policy-statement from-hkg2vpn term 2 then accept
set policy-options policy-statement from-ty4vpn term 1 from prefix-list HKG3
set policy-options policy-statement from-ty4vpn term 1 then reject
set policy-options policy-statement from-ty4vpn term 2 then local-preference 80
set policy-options policy-statement from-ty4vpn term 2 then accept
set policy-options policy-statement to-hkg2vpn term 1 from prefix-list HKG3
set policy-options policy-statement to-hkg2vpn term 1 then as-path-prepend "65242 65242 65242"
set policy-options policy-statement to-hkg2vpn term 1 then accept
set policy-options policy-statement to-hkg2vpn term 2 then reject
set policy-options policy-statement to-ty4vpn term 1 from prefix-list HKG3
set policy-options policy-statement to-ty4vpn term 1 then as-path-prepend "65242 65242 65242 65242 65242"
set policy-options policy-statement to-ty4vpn term 1 then accept
set policy-options policy-statement to-ty4vpn term 2 then reject
set firewall filter router-protect term 1 from protocol icmp
set firewall filter router-protect term 1 then accept
set firewall filter router-protect term 2 from source-prefix-list manager-ip
set firewall filter router-protect term 2 then accept
set firewall filter router-protect term 3 from prefix-list remote-vpn
set firewall filter router-protect term 3 then accept
set firewall filter router-protect term 4 from source-address 0.0.0.0/0
set firewall filter router-protect term 4 then discard
set vlans vlan-trust vlan-id 3
set vlans vlan-trust l3-interface irb.0
set protocols ospf area 0.0.0.0 interface lo0.0 passive
set protocols ospf area 0.0.0.0 interface ge-0/0/1.0
set protocols bgp group hkg2-vpn type external
set protocols bgp group hkg2-vpn preference 8
set protocols bgp group hkg2-vpn import from-hkg2vpn
set protocols bgp group hkg2-vpn export to-hkg2vpn
set protocols bgp group hkg2-vpn peer-as 65244
set protocols bgp group hkg2-vpn neighbor 10.242.250.1
set protocols bgp group ty4-vpn type external
set protocols bgp group ty4-vpn preference 8
set protocols bgp group ty4-vpn import from-ty4vpn
set protocols bgp group ty4-vpn export to-ty4vpn
set protocols bgp group ty4-vpn peer-as 65110
set protocols bgp group ty4-vpn neighbor 10.242.250.5
set protocols l2-learning global-mode switching
set protocols lldp interface all
set protocols rstp interface all
set routing-options autonomous-system 65242
set routing-options static route 199.33.119.21/32 next-hop 183.178.35.110
set routing-options static route 10.242.0.0/16 discard
set routing-options static route 205.175.208.9/32 next-hop 183.178.35.110